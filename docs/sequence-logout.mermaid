sequenceDiagram
    participant User as User (Web/Mobile)
    participant UI as App UI
    participant AuthCtrl as AuthController
    participant AuthSvc as AuthService
    participant SessRepo as UserSessionRepository
    participant DB as MySQL

    User->>UI: Tap/Click Logout
    UI->>AuthCtrl: POST /api/auth/logout (Authorization: Bearer token)
    AuthCtrl->>AuthSvc: logout(token)

    AuthSvc->>SessRepo: findBySessionToken(token)
    SessRepo->>DB: SELECT user_sessions by token
    DB-->>SessRepo: session or empty

    alt Session exists
        AuthSvc->>SessRepo: save(session.isActive=false)
        SessRepo->>DB: UPDATE user_sessions
    else Session missing
        AuthSvc->>AuthSvc: no-op
    end

    AuthSvc-->>AuthCtrl: done
    AuthCtrl-->>UI: 200 OK
    UI-->>User: Clear local auth state and navigate to Login
